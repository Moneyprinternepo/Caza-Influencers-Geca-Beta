<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Caza Influencers - Dashboard Pro</title>
  
  <!-- Estilos Externos -->
  <link rel="stylesheet" href="style.css" />

  <!-- Librer√≠as Externas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.3.0/chart.umd.min.js"></script>
</head>
<body>
  <div class="container" id="mainContent">
    <header>
        <h1>Caza Influencers</h1>
        <div class="logos">
            <img src="https://images.mediapro.es/generic/companies/logo_geca.png" alt="Logo Geca" />
            <img src="https://www.cinesfilmax.com/assets/cinesfilmax-logo.svg" alt="Logo Filmax"/>
        </div>
    </header>
    
    <!-- Pesta√±as Principales -->
    <div class="tabs">
        <button class="tab active" data-tab="campanas">Tus campa√±as</button>
        <button class="tab" data-tab="mis-influencers">Mis Influencers</button>
        <button class="tab" data-tab="explorar">Explorar</button>
    </div>

    <!-- VISTA: TUS CAMPA√ëAS (GLOBALES) -->
    <div id="campaign-view">
        <div id="campaign-overview-view">
            <!-- Global KPIs -->
            <div class="global-dashboard">
                <div class="global-kpi-card">
                    <span class="label">Inversi√≥n Total</span>
                    <span class="value" id="global-spent">0‚Ç¨</span>
                </div>
                <div class="global-kpi-card">
                    <span class="label">Click Through Rate (Medio)</span>
                    <span class="value" id="global-ctr">0%</span>
                </div>
                <div class="global-kpi-card">
                    <span class="label">Alcance Medio</span>
                    <span class="value" id="global-reach">0</span>
                </div>
                <div class="global-kpi-card">
                    <span class="label">Clicks En Enlace Totales</span>
                    <span class="value" id="global-clicks">0</span>
                </div>
                <div class="global-kpi-card">
                    <span class="label">Tasa Retenci√≥n Media</span>
                    <span class="value" id="global-retention">0%</span>
                </div>
                 <div class="global-kpi-card">
                    <span class="label">Frecuencia Media</span>
                    <span class="value" id="global-frequency">0</span>
                </div>
            </div>

            <!-- Gr√°fico Global -->
             <div class="chart-wrapper" style="height: 280px; margin-bottom: 30px;">
                <canvas id="all-campaigns-chart"></canvas>
            </div>

            <div class="campaign-header">
                <div>
                    <h2 style="color:var(--primary);margin-bottom:5px">Ranking de Campa√±as</h2>
                    <p class="text-secondary">Clasificaci√≥n basada en m√©trica seleccionada.</p>
                </div>
                <button class="btn btn-secondary" id="reload-data-btn">üîÑ Recargar Datos</button>
            </div>
            
            <div class="filter-bar" style="grid-template-columns:1fr 2fr;margin-bottom:30px">
                <label for="campaign-sort-filter" class="text-secondary" style="align-self:center">Ordenar por KPI:</label>
                <select id="campaign-sort-filter">
                    <option value="score">Puntuaci√≥n General (Algoritmo IA)</option>
                    <option value="ticketsSold">Tickets vendidos</option>
                    <option value="impressions">Impresiones</option>
                    <option value="clickRate">CTR (Click Through Rate)</option>
                    <option value="reach">Alcance</option>
                    <option value="budget">Coste (Inversi√≥n)</option>
                    <option value="cpc">Coste por Click (CPC)</option>
                    <option value="cpm">Coste por Impresi√≥n (CPM)</option>
                    <option value="frequency">Frecuencia</option>
                </select>
            </div>
            
            <div id="campaign-overview-content"></div>
        </div>
        
        <!-- Detalle Campa√±a Individual -->
        <div id="campaign-detail-view" class="hidden"></div>
    </div>

    <!-- VISTA: MIS INFLUENCERS -->
    <div id="my-influencers-view" class="hidden">
        
        <!-- Sub Pesta√±as internas -->
        <div class="sub-tabs">
            <button class="sub-tab active" id="sub-tab-influencers">Por Influencer</button>
            <button class="sub-tab" id="sub-tab-campaigns">Por Campa√±as</button>
        </div>

        <!-- 1. SUB-VISTA: POR INFLUENCER -->
        <div id="my-influencers-grid-view">
            <div class="campaign-header">
                <div>
                    <h2 style="color:var(--primary)">Mis Influencers Activos</h2>
                    <p class="text-secondary">Rendimiento <strong>PROMEDIO</strong> por contenido publicado.</p>
                </div>
                <div style="display:flex; gap:10px; align-items:center;">
                    <label class="text-secondary">Ordenar por:</label>
                    <select id="my-influencers-sort" style="width:200px">
                        <option value="impressions">Prom. Impresiones</option>
                        <option value="reach">Prom. Alcance</option>
                        <option value="engagement">Prom. Engagement</option>
                        <option value="count">N¬∫ de Contenidos (Total)</option>
                        <option value="name">Alfab√©tico</option>
                    </select>
                </div>
            </div>
            <div id="my-influencers-grid" class="results-grid"></div>
        </div>
        
        <!-- Detalle de Influencer -->
        <div id="my-influencer-detail-view" class="hidden"></div>

        <!-- 2. SUB-VISTA: POR CAMPA√ëAS (CONTENIDOS) -->
        <div id="my-campaigns-grid-view" class="hidden">
            <div class="campaign-header">
                <div>
                    <h2 style="color:var(--primary)">Campa√±as de Influencers</h2>
                    <p class="text-secondary">Contenidos agrupados por t√≠tulo de campa√±a.</p>
                </div>
            </div>
            <div id="my-campaigns-grid" class="results-grid"></div>
        </div>

        <!-- Detalle de Campa√±a de Influencers -->
        <div id="my-campaigns-detail-view" class="hidden"></div>

    </div>

    <!-- VISTA: EXPLORAR -->
    <div id="explore-view" class="hidden">
        <div class="filter-bar">
            <select id="platform-filter"><option value="Todos">Todas las plataformas</option><option value="YouTube">YouTube</option><option value="Instagram">Instagram</option><option value="TikTok">TikTok</option><option value="Reddit">Reddit</option></select>
            <select id="followers-filter"><option value="Todos">Todos los seguidores</option><option value="<100K">Menos de 100K</option><option value="100K-500K">Entre 100K y 500K</option><option value=">500K">M√°s de 500K</option></select>
            <select id="tag1-filter"><option value="Todos">Todos los nichos</option></select>
            <select id="tag2-filter"><option value="Todos">Todos los nichos (2)</option></select>
            <input type="text" id="search-input" placeholder="Buscar..." />
            <button class="btn" id="search-btn" disabled>üîç Buscar</button>
        </div>
        <div id="results-container" class="results-grid hidden"></div>
        <div id="detail-container" class="detail-view hidden"></div>
    </div>
    
    <div id="loader" class="loader"></div>
  </div>

  <!-- L√≥gica Javascript -->
  <script src="script.js"></script>
</body>
</html>
